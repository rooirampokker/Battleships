<%= javascript_include_tag "gridController" %>
<%= javascript_include_tag "shipController" %>
<%= javascript_include_tag "nukeController" %>

<p id="notice"><%= notice %></p>
<section id="playGrids">
<!-- PLAYER PLAY AREA -->
    <div class="panel panel-default">
        <div class="panel-heading">Player</div>
        <div class="panel-body">
           <div id="playerTable" class="float"></div>
        </div>
    </div>
<!-- ENEMY PLAY AREA -->    
    <div class="panel panel-default">
        <div class="panel-heading">Enemy</div>
        <div class="panel-body">
           <div id="enemyTable" class="float"></div>
        </div>
    </div>    
<!-- DRYDOCK/SHIPYARD -->            
	<div id="dryDock"><div class="ship"></div>
</section>

<!-- START BUTTON -->
<div class="form-group">
		<div class="col-md-6 col-md-offset-4">
		<button type="button" class="btn btn-primary " id="startButton">
			<i class="glyphicon glyphicon-log-in"></i> Start
		</button>
	</div>
</div>
  <%= render "instructions_modal" %>

<script type="text/javascript">
$(function ()  {
	generateTable('enemyTable', -1, -1, 'placeGrid');
	generateTable('playerTable', -1, -1, 'placeGrid');
//draws the event-capturing, ship-locking grid and disables the start button - I also need to check if all ships were placed
	$("#startButton").bind('click', function(event) {
		event.stopPropagation(); 
		generateTable('playerTable', <%= "#{session[:incomingX]}, #{session[:incomingY]}" %>, 'playGrid');
		generateTable('enemyTable', -1, -1, 'playGrid');
		$(this).attr('disabled', true);
	});
	//loads all ships
	loadShipYard(<%= "#{session[:gameID]}" %>);

	//load instructino modal
	$("#instructionsModal").draggable({
	    handle: ".modal-header"
	}).modal("show");
});
</script>


